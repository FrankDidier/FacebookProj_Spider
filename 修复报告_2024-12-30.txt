================================================================================
                     FBè„šæœ¬ä¿®å¤æŠ¥å‘Š - 2024å¹´12æœˆ30æ—¥
                     åŸºäºå®¢æˆ·æœ€æ–°åé¦ˆ (session_20251229_111037.log)
================================================================================

ğŸ” å®¢æˆ·åé¦ˆé—®é¢˜åˆ†æ
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. ä»£ç†IPå¯¼å…¥æˆåŠŸä½†æ˜¯ä¸ä¼šè‡ªåŠ¨åˆ†é…åˆ°æµè§ˆå™¨ IPä¸è¡Œ
2. é‡‡é›†ç¾¤ç»„å‡ºæ¥æ–‡æœ¬è¿˜æ˜¯ä¸¤ä¸ªï¼Œåªéœ€è¦ä¿ç•™ä¸€ä¸ª linksæ–‡æœ¬
3. é‡‡é›†æˆå‘˜é€‰æ‹©æµè§ˆï¼Œä¸è¡Œï¼Œå¡æ­»
4. 4ä¸ªæµè§ˆå™¨æ‰“å¼€ åˆ†è¾¨ç‡æ²¡æœ‰è‡ªåŠ¨æ’åˆ—å¤§å°ä½ç½® è¿˜æ˜¯åœ¨ä¸€ä¸ªä½ç½®æ‰“å¼€
5. é‡‡é›†æˆå‘˜ æ–‡ä»¶åˆ é™¤æ ¼å¼3-2-1-0 è¿˜æ˜¯ä¸è¡Œ

================================================================================
                           ä¿®å¤å†…å®¹
================================================================================

âœ… é—®é¢˜1: ä»£ç†IPæ— æ³•åˆ†é…åˆ°æµè§ˆå™¨
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
åŸå› : BitBrowser API ä¸æ”¯æŒåœ¨å¯åŠ¨æ—¶ä¼ å…¥ä»£ç†é…ç½®ï¼Œéœ€è¦å…ˆæ›´æ–°æµè§ˆå™¨é…ç½®

ä¿®å¤:
- æ–‡ä»¶: autoads/bitbrowser_api.py
- æ–°å¢: update_browser_proxy() å‡½æ•°
- åŠŸèƒ½: åœ¨å¯åŠ¨æµè§ˆå™¨å‰ï¼Œå…ˆè°ƒç”¨ /browser/update API æ›´æ–°æµè§ˆå™¨çš„ä»£ç†é…ç½®
- æ ¼å¼: 
  {
    "id": "browser_id",
    "proxyMethod": 2,      // 2=è‡ªå®šä¹‰ä»£ç†
    "proxyType": "http",   // http, socks5
    "host": "proxy_host",
    "port": "proxy_port",
    "proxyUserName": "username",
    "proxyPassword": "password"
  }

æ—¥å¿—è¯æ® (ä¿®å¤å‰):
  2025-12-29 11:16:05.420 | INFO | autoads.ip_pool:get_proxy_for_browser:181 | 
  Assigned proxy proxy.smartproxycn.com:1000 to browser 0398fa1bd06c42349ebfb816f338124b

ä¿®å¤åå°†æ˜¾ç¤º:
  âœ… BitBrowser ä»£ç†æ›´æ–°æˆåŠŸ: {browser_id} -> {host}:{port}


âœ… é—®é¢˜2: ç¾¤ç»„é‡‡é›†å‡ºæ¥2ä¸ªæ–‡ä»¶
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
åŸå› : config.ini ä¸­ groups.save_links_only è®¾ä¸º false

ä¿®å¤:
- æ–‡ä»¶: config.ini
- ä¿®æ”¹: groups.save_links_only = true (åŸæ¥æ˜¯ false)
- æ–‡ä»¶: autoads/config.py  
- ä¿®æ”¹: groups_save_links_only é»˜è®¤å€¼æ”¹ä¸º True
- æ–‡ä»¶: autoads/pipelines/file_pipeline.py
- ä¿®æ”¹: æ”¯æŒä» _links.txt æ–‡ä»¶è¯»å–ç¾¤ç»„æ•°æ®ä¾›é‡‡é›†æˆå‘˜ä½¿ç”¨

æ•ˆæœ:
- ä¹‹å‰: ç”Ÿæˆ ç½‘æŠ•.txt (JSON) + ç½‘æŠ•_links.txt (çº¯URL) = 2ä¸ªæ–‡ä»¶
- ç°åœ¨: åªç”Ÿæˆ ç½‘æŠ•_links.txt (çº¯URL) = 1ä¸ªæ–‡ä»¶
- é‡‡é›†æˆå‘˜åŠŸèƒ½ä»å¯æ­£å¸¸è¯»å– _links.txt æ–‡ä»¶


âœ… é—®é¢˜3: æµè§ˆé€‰æ‹©æ–‡ä»¶åå¡æ­»
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
åŸå› : é€‰æ‹©æ–‡ä»¶åæœªä¿å­˜åˆ° config.groups_selected_fileï¼Œå¯¼è‡´é‡‡é›†æˆå‘˜æ—¶æ‰¾ä¸åˆ°æ–‡ä»¶

ä¿®å¤:
- æ–‡ä»¶: facebook.py
- æ–°å¢: åœ¨ _browse_member_group_file ä¸­ä¿å­˜é€‰æ‹©çš„æ–‡ä»¶è·¯å¾„åˆ° config
  config.groups_selected_file = file_name

- æ–‡ä»¶: autoads/config.py
- æ–°å¢: groups_selected_file.setter å±æ€§

- æ–‡ä»¶: facebook.py (_refresh_group_files)
- ä¿®æ”¹: åˆ·æ–°æ–‡ä»¶åˆ—è¡¨æ—¶ä½¿ç”¨ config.groups_table ç›®å½• (./fb/group/)


âœ… é—®é¢˜4: 4ä¸ªæµè§ˆå™¨ä¸è‡ªåŠ¨æ’åˆ—
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
åŸå› : driver_count å‚æ•°æ²¡æœ‰ä» Request ä¼ é€’åˆ° WebDriverPool.get()

ä¿®å¤:
- æ–‡ä»¶: autoads/request.py
- ä¿®æ”¹: åœ¨ get_response ä¸­ä¼ é€’ driver_count åˆ° WebDriverPool.get()
  driver_count = getattr(self, 'driver_count', None)
  browser = self._webdriver_pool.get(..., driver_count=driver_count)

- æ–‡ä»¶: autoads/webdriver.py
- ä¿®æ”¹: WebDriverPool.get() æ¥å— driver_count å‚æ•°
- æ–°å¢: æ—¥å¿—è¾“å‡ºçª—å£æ’åˆ—ä¿¡æ¯
  log.info(f"ğŸªŸ çª—å£è‡ªåŠ¨æ’åˆ—: æµè§ˆå™¨ {ads_id} ä½ç½® {window_size} (å…±{driver_count}ä¸ªæµè§ˆå™¨)")

çª—å£æ’åˆ—è§„åˆ™:
  - 4ä¸ªæµè§ˆå™¨: 2x2 ç½‘æ ¼
  - 8ä¸ªæµè§ˆå™¨: 4x2 ç½‘æ ¼
  - æ›´å¤š: è‡ªåŠ¨è®¡ç®—æœ€ä½³æ’åˆ—


âœ… é—®é¢˜5: æ–‡ä»¶åˆ é™¤æ ¼å¼é—®é¢˜
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
åŸå› : å½“åªæœ‰ _links.txt æ–‡ä»¶æ—¶ï¼Œåˆ é™¤é€»è¾‘åªæŸ¥æ‰¾ JSON æ–‡ä»¶

ä¿®å¤:
- æ–‡ä»¶: spider/fb_members.py
- ä¿®æ”¹: åˆ é™¤é€»è¾‘åŒæ—¶æ”¯æŒ JSON æ–‡ä»¶å’Œ _links.txt æ–‡ä»¶
  1. å…ˆå°è¯•ä» JSON æ–‡ä»¶åˆ é™¤ (ä½¿ç”¨ key-value æ¨¡å¼)
  2. å¦‚æœæ²¡æ‰¾åˆ°ï¼Œå†ä» _links.txt åˆ é™¤ (ä½¿ç”¨çº¯URLæ¨¡å¼)


================================================================================
                           æ—¥å¿—åˆ†æè¯æ®
================================================================================

1. IPä»£ç†åˆ†é…æˆåŠŸ (å®¢æˆ·æ—¥å¿—):
   Line 95:  Assigned proxy proxy.smartproxycn.com:1000 to browser 0398fa...
   Line 111: Assigned proxy proxy.smartproxycn.com:1000 to browser 7bc6af...
   Line 127: Assigned proxy proxy.smartproxycn.com:1000 to browser a9255b...
   Line 143: Assigned proxy proxy.smartproxycn.com:1000 to browser b915c5...

2. æµè§ˆå™¨æˆåŠŸå¯åŠ¨ (å®¢æˆ·æ—¥å¿—):
   Line 100-102: BitBrowser å¯åŠ¨æˆåŠŸ: 0398fa... 
   Line 116-118: BitBrowser å¯åŠ¨æˆåŠŸ: 7bc6af...
   Line 132-134: BitBrowser å¯åŠ¨æˆåŠŸ: a9255b...

3. ç¬¬4ä¸ªæµè§ˆå™¨å†…å­˜ä¸è¶³ (å®¢æˆ·ç”µè„‘é—®é¢˜ï¼Œéè„šæœ¬é—®é¢˜):
   Line 148: 'çª—å£ 4 å¯åŠ¨å¤±è´¥ï¼Œå†…å­˜ä½¿ç”¨ç‡è¶…å‡º 95%'

4. å¤šçº¿ç¨‹å·¥ä½œæ­£å¸¸ (å®¢æˆ·æ—¥å¿—):
   Line 64-65: ä¸»çº¿ç¨‹å¼€å§‹å¯åŠ¨ï¼Œå‡†å¤‡å¼€å¯4ä¸ªParserControlçº¿ç¨‹
              âœ… å¤šçº¿ç¨‹å¯åŠ¨: 4ä¸ªçº¿ç¨‹å°†åŒæ—¶è¿è¡Œ
   Line 73-76: Thread-7, Thread-8, Thread-9, Thread-10 å…¨éƒ¨å¯åŠ¨


================================================================================
                           å»ºè®®å®¢æˆ·æ“ä½œ
================================================================================

1. é‡æ–°ä¸‹è½½æœ€æ–°ç‰ˆæœ¬ (GitHub Actions æœ€æ–°æ„å»º)

2. å†…å­˜ä½¿ç”¨ç‡è¿‡é«˜é—®é¢˜:
   - å®¢æˆ·æ—¥å¿—æ˜¾ç¤º "çª—å£ 4 å¯åŠ¨å¤±è´¥ï¼Œå†…å­˜ä½¿ç”¨ç‡è¶…å‡º 95%"
   - å»ºè®®: å‡å°‘åŒæ—¶æ‰“å¼€çš„æµè§ˆå™¨æ•°é‡ (account_nums è®¾ä¸º 3 æˆ– 2)
   - æˆ–è€…: å…³é—­å…¶ä»–ä¸å¿…è¦çš„ç¨‹åºé‡Šæ”¾å†…å­˜

3. æµ‹è¯•ä»£ç†é…ç½®:
   - åœ¨é…ç½®å‘å¯¼ä¸­ç‚¹å‡» "é€‰æ‹©IPæ–‡ä»¶" å¯¼å…¥ä»£ç†
   - ç‚¹å‡» "æµ‹è¯•IP" éªŒè¯ä»£ç†å¯ç”¨
   - å¯åŠ¨é‡‡é›†æ—¶æŸ¥çœ‹æ—¥å¿—æ˜¯å¦æ˜¾ç¤º "âœ… BitBrowser ä»£ç†æ›´æ–°æˆåŠŸ"

4. æµ‹è¯•ç¾¤ç»„é‡‡é›†:
   - è¿è¡Œé‡‡é›†ç¾¤ç»„ï¼Œç¡®è®¤åªç”Ÿæˆ1ä¸ª _links.txt æ–‡ä»¶
   - è¿è¡Œé‡‡é›†æˆå‘˜ï¼Œç¡®è®¤å¯ä»¥æ­£å¸¸è¯»å–ç¾¤ç»„æ•°æ®


================================================================================
                           ä¿®æ”¹çš„æ–‡ä»¶åˆ—è¡¨
================================================================================

1. autoads/bitbrowser_api.py  - æ–°å¢ update_browser_proxy() å‡½æ•°
2. autoads/webdriver.py       - ä¿®å¤çª—å£è‡ªåŠ¨æ’åˆ—å‚æ•°ä¼ é€’
3. autoads/request.py         - ä¼ é€’ driver_count åˆ° WebDriverPool
4. autoads/config.py          - æ–°å¢ groups_selected_file.setter
5. autoads/pipelines/file_pipeline.py - æ”¯æŒè¯»å– _links.txt æ–‡ä»¶
6. config.ini                 - groups.save_links_only = true
7. spider/fb_members.py       - æ”¯æŒä» _links.txt åˆ é™¤æ¡ç›®
8. facebook.py                - ä¿å­˜é€‰æ‹©çš„æ–‡ä»¶è·¯å¾„ï¼Œåˆ·æ–°æ­£ç¡®ç›®å½•


================================================================================
                           ç‰ˆæœ¬ä¿¡æ¯
================================================================================

ä¿®å¤æ—¥æœŸ: 2024å¹´12æœˆ30æ—¥
åŸºäºæ—¥å¿—: session_20251229_111037.log
æµ‹è¯•çŠ¶æ€: ä»£ç ä¿®æ”¹å®Œæˆï¼Œéœ€è¦å®¢æˆ·å®é™…æµ‹è¯•éªŒè¯

================================================================================

